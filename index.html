<!DOCTYPE html>
<html lang="ar">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>JW PLAYER Pro</title>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.1/shaka-player.compiled.js"></script>
   <script src="https://content.jwplatform.com/libraries/SAHhwvZq.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

   <style>
      * { margin: 0; padding: 0; outline: none; }
      #container { position: absolute; width: 100%!important; height: 100%!important; }
      *:focus { outline: none; }
   </style>

   <script>
      let isExpanded = false;

      const expandSvg = `<svg fill="#ffffff" version="1.1" id="expand_icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 100 100" xml:space="preserve">
         <g>
            <path d="M22.661,20.5H36c1.104,0,2-0.896,2-2s-0.896-2-2-2H19c-1.104,0-2.5,1.276-2.5,2.381v17c0,1.104,0.896,2,2,2s2-0.896,2-2V24.876l16.042,15.791c0.391,0.391,1.027,0.586,1.539,0.586s1.086-0.195,1.477-0.586c0.781-0.781,0.812-2.237,0.031-3.019L22.661,20.5z"/>
            <path d="M83,16.5H66c-1.104,0-2,0.896-2,2s0.896,2,2,2h12.605L61.647,37.648c-0.781,0.781-0.781,2.142,0,2.923c0.39,0.391,0.902,0.633,1.414,0.633s0.774-0.171,1.164-0.562l16.274-16.5v11.738c0,1.104,0.896,2,2,2s2-0.896,2-2v-17C84.5,17.776,84.104,16.5,83,16.5z"/>
            <path d="M36.542,60.962L20.5,76.754V65.881c0-1.104-0.896-2-2-2s-2,0.896-2,2v17c0,1.104,1.396,1.619,2.5,1.619h17c1.104,0,2-0.896,2-2s-0.896-2-2-2H22.529L39.62,63.6c0.781-0.781,0.656-1.951-0.125-2.732C38.715,60.086,37.322,60.181,36.542,60.962z"/>
            <path d="M82.5,63.881c-1.104,0-2,0.896-2,2v11.606L64.226,60.962c-0.78-0.781-1.923-0.781-2.703,0c-0.781,0.781-0.719,1.856,0.062,2.638l17.152,16.9H66c-1.104,0-2,0.896-2,2s0.896,2,2,2h17c1.104,0,1.5-0.515,1.5-1.619v-17C84.5,64.776,83.604,63.881,82.5,63.881z"/>
         </g>
      </svg>`;

      jwplayer.key = "ITWMv7t88JGzI0xPwW8I0+LveiXX9SWbfdmt0ArUSyc=";

      function setupJWPlayer(streamUrl) {
         var player = jwplayer("container").setup({
            width: "100%",
            height: "100%",
            controls: true,
            stretching: "uniform",
            autostart: true,
            preload: "auto",
            playbackRateControls: true,
            mute: false,
            volume: 50,
            logo: {
               file: "",
               link: "https://t.me/Hamada_tv1",
               hide: false,
               position: "bottom-left",
               margin: 20
            },
            skin: {
               url: "https://cdn.jsdelivr.net/gh/kiprox/cf-gdplay@master/skins/netplex.css",
               name: "Netflix"
            },
            aspectratio: "16:9",
            playlist: [{
               sources: [{
                  file: streamUrl,
                  type: "dash",
                  drm: {
                     clearkey: {
                        keyId: "7faafe485db7395b9583222a3a6e789d", 
                        key: "163906ba32dd3d611aad5789cbd00858"
                     }
                  },
                  label: "HD"
               }]
            }]
         });

         player.on("setupError", function(event) {
            console.error("خطأ في إعداد المشغل:", event.message);
            alert("حدث خطأ أثناء تحميل المشغل!");
         });

         player.addButton(expandSvg, 'expand', function() {
            toggleExpand();
         }, 'expandButton');

         function toggleExpand() {
            const videoElement = document.querySelector("#container video");
            if (!videoElement) return;
            videoElement.style.objectFit = isExpanded ? 'fill' : 'contain';
            isExpanded = !isExpanded;
            updateExpandButtonTooltip();
         }

         function updateExpandButtonTooltip() {
            const button = document.querySelector('.jw-expandButton');
            if (button) {
               button.setAttribute('aria-label', isExpanded ? 'تصغير الفيديو' : 'تمدد الفيديو');
            }
         }

         player.on("ready", function() {
            console.log("تم تحميل المشغل بنجاح!");
         });
      }

      document.addEventListener("DOMContentLoaded", function() {
         setupJWPlayer("https://todtv-live-ent-prod.akamaized.net/Content/Channel/svc-spo-hd-39-dt/DASH/playlist_tv.mpd?hdnts=st=1744220169~exp=1744227418~acl=*/Content/Channel/svc-spo-hd-39-dt/DASH/*~id=a720ebec-0d88-4916-ba6f-b38b89156128~data=aXA9NDEuMTExLjIzNC45OA~hmac=4e68dfb5873cd47e4d574e3c81ba36cc951bf72fcd795cfea3722ba1e99f43b0&_nocache=1a9e537b68003a601f446f2a3828f289");
      });
   </script>
</head>
<body>
   <div id="container"></div>
</body>
</html>
